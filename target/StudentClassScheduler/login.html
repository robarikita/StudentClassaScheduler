<!DOCTYPE html>
<html>
<head>
    <title>Login - Student Class Scheduler</title>
    <style>
        body { font-family: Arial; margin: 40px; background: #f5f5f5; }
        .login-container {
            width: 350px;
            margin: 100px auto;
            padding: 40px;
            background: white;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }
        h2 { text-align: center; color: #333; margin-bottom: 30px; }
        .form-group { margin-bottom: 20px; }
        input {
            width: 100%;
            padding: 12px;
            border: 1px solid #ddd;
            border-radius: 5px;
            font-size: 16px;
            box-sizing: border-box;
        }
        button {
            width: 100%;
            padding: 14px;
            background: #4CAF50;
            color: white;
            border: none;
            border-radius: 5px;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
        }
        button:hover { background: #45a049; }
        .error {
            color: #d32f2f;
            background: #ffebee;
            padding: 12px;
            border-radius: 5px;
            margin-bottom: 20px;
            border: 1px solid #ffcdd2;
        }
        .test-creds {
            margin-top: 25px;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 5px;
            font-size: 14px;
        }
        .direct-buttons { margin-top: 20px; }
        .direct-btn {
            display: block;
            width: 100%;
            margin: 5px 0;
            padding: 10px;
            background: #2196F3;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }
        .direct-btn:hover { background: #0b7dda; }
        .admin-btn { background: #4CAF50; }
        .student-btn { background: #FF9800; }
    </style>
</head>
<body>
    <div class="login-container">
        <h2>Login</h2>

        <!-- Display error if any -->

        <!-- NORMAL FORM (Will be intercepted by JS) -->
        <form id="mainForm" method="post">
            <div class="form-group">
                <input type="text" name="username" placeholder="Username" required
                       autocomplete="off" id="usernameField">
            </div>
            <div class="form-group">
                <input type="password" name="password" placeholder="Password" required
                       autocomplete="off" id="passwordField">
            </div>
            <button type="submit" onclick="return submitForm()">Login</button>
        </form>

        <!-- DIRECT LOGIN BUTTONS (Bypass form completely) -->
        <div class="direct-buttons">
            <button class="direct-btn admin-btn" onclick="directLogin('admin', 'admin123')">
                Quick Login as Admin
            </button>
            <button class="direct-btn student-btn" onclick="directLogin('student1', 'student123')">
                Quick Login as Student
            </button>
        </div>

        <!-- Test credentials -->
        <div class="test-creds">
            <p><strong>Test Credentials:</strong></p>
            <p>Admin: username=admin, password=admin123</p>
            <p>Student: username=student1, password=student123</p>
        </div>
    </div>

    <script>
    // MAIN FUNCTION: Force form to submit to /login
    function submitForm() {
        var username = document.getElementById('usernameField').value;
        var password = document.getElementById('passwordField').value;

        // Create a NEW form that will definitely go to /login
        var newForm = document.createElement('form');
        newForm.method = 'POST';
        newForm.action = 'login';  // HARDCODED - cannot be changed by browser

        // Add username
        var userInput = document.createElement('input');
        userInput.type = 'hidden';
        userInput.name = 'username';
        userInput.value = username;
        newForm.appendChild(userInput);

        // Add password
        var passInput = document.createElement('input');
        passInput.type = 'hidden';
        passInput.name = 'password';
        passInput.value = password;
        newForm.appendChild(passInput);

        // Submit the new form
        document.body.appendChild(newForm);
        newForm.submit();

        // STOP the original form from submitting
        return false;
    }

    // DIRECT LOGIN: Bypass form completely
    function directLogin(username, password) {
        var form = document.createElement('form');
        form.method = 'POST';
        form.action = 'login';  // FORCED to /login

        var userField = document.createElement('input');
        userField.type = 'hidden';
        userField.name = 'username';
        userField.value = username;
        form.appendChild(userField);

        var passField = document.createElement('input');
        passField.type = 'hidden';
        passField.name = 'password';
        passField.value = password;
        form.appendChild(passField);

        document.body.appendChild(form);
        form.submit();
    }

    // Clear any saved form data on page load
    window.addEventListener('load', function() {
        document.getElementById('usernameField').value = '';
        document.getElementById('passwordField').value = '';

        // Break browser cache with random parameter
        if (window.location.search.indexOf('nocache') === -1) {
            var url = new URL(window.location.href);
            url.searchParams.set('nocache', Date.now());
            window.history.replaceState({}, '', url);
        }
    });
    </script>
</body>
</html>